<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <div th:replace="fragment/_header :: header"></div>
<body>
    <div th:replace="fragment/_navbar :: navbar"></div>

<main  style="min-height: 100vh;">
    <section class="h-100 gradient-custom-2">
        <div class="container py-5 h-100">
          <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col col-lg-9 col-xl-7">
              <div class="card">
                <div class="rounded-top text-white d-flex flex-row" 
                style="background-color: #000; height:200px;">
                  <div class="ms-3 ml-2 mt-5 d-flex flex-column" style="width: 150px;">
                    <img th:if="${user.profilepic == null}" th:src="@{/images/user.jpg}"
                      class="img-fluid img-thumbnail mt-3 mb-2"
                      style="width: 150px; z-index: 1;aspect-ratio: 4/5;object-fit: cover;">
                    <img th:if="${user.profilepic != null}" th:src="@{${'/userImages/profile' + user.profilepic}}"
                     class="img-fluid img-thumbnail mt-3 mb-2"
                      style="width: 150px; z-index: 1;aspect-ratio: 4/5;object-fit: cover;">
                  </div>
                  <div class="ms-3 ml-2" style="margin-top: 130px;">
                    <h5>
                        <span th:text="${user.firstName}"></span>
                        <span th:text="${user.lastName}"></span>
                    </h5>
                    <p th:text="${user.email}"></p>
                  </div>
                </div>
                <div class="p-4 text-black" style="background-color: #f8f9fa;">
                  <div class="d-flex justify-content-end text-center py-1">
                    <div>
                      <p class="mb-1 h5">
                        <span th:if="${user.totalitem == null}">0</span>
                        <span th:text="${user.totalitem}"></span>
                    </p>
                      <p class="small text-muted mb-0">Total Purchase Items</p>
                    </div>
                    <div class="px-3">
                      <p class="mb-1 h5">â‚¹ 
                        <span th:if="${user.totalamount== null}">0</span>
                        <span th:text="${user.totalamount}"></span>
                      </p>
                      <p class="small text-muted mb-0">Total Expenditure</p>
                    </div>
                  </div>
                </div>
                <div class="card-body p-4 text-black">
                  <div class="mb-5">
                    <div class="d-flex">
                      <span class="lead font-weight-bold mb-1">Address</span>
                      <button type="button" 
                        style="background-color: transparent; outline: none; border: none; margin: 0px 5px ; margin-top: -5px; padding: 0;"
                        onclick="editAddress()"
                        >
                        <i style="font-size: medium;" class="fa fa-edit"></i>
                      </button>
                    </div>
                    <div style="background-color: #f8f9fa;">
                      <textarea
                        class="p-4"
                        style="width: 100%; background-color: #f8f9fa; outline: none !important; border: none !important;"
                      id="addressInput" th:value="${user.address}" readonly></textarea>
                    </div>
                  </div>
                  <div class="d-flex justify-content-end">
                    <button id="savebutton" style="display: none;" type="button" class="btn btn-outline-danger mx-2 btn-lg"
                      onclick="saveUpdate()"
                    >
                      Save
                    </button>
                    <button id="cancelbutton" style="display: none;" type="button" class="btn btn-outline-dark mx-2 btn-lg"
                      onclick="cancelUpdate()"
                    >
                      Cancel
                    </button>
                  </div>
                  <!--section>
                  <div class="d-flex justify-content-between align-items-center mb-4">
                    <p class="lead fw-normal mb-0">Purchased History</p>
                    <p class="mb-0"><a href="#!" class="text-muted">Show all</a></p>
                  </div>
                  <div class="row g-2">
                    <div class="col mb-2">
                      <img src="https://mdbcdn.b-cdn.net/img/Photos/Lightbox/Original/img%20(112).webp"
                        alt="image 1" class="w-100 rounded-3">
                    </div>
                    <div class="col mb-2">
                      <img src="https://mdbcdn.b-cdn.net/img/Photos/Lightbox/Original/img%20(107).webp"
                        alt="image 1" class="w-100 rounded-3">
                    </div>
                  </div>
                  <div class="row g-2">
                    <div class="col">
                      <img src="https://mdbcdn.b-cdn.net/img/Photos/Lightbox/Original/img%20(108).webp"
                        alt="image 1" class="w-100 rounded-3">
                    </div>
                    <div class="col">
                      <img src="https://mdbcdn.b-cdn.net/img/Photos/Lightbox/Original/img%20(114).webp"
                        alt="image 1" class="w-100 rounded-3">
                    </div>
                  </div>
                  </section -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
</main>

<div th:replace="fragment/_footer :: footer"></div>
<script>

  function editAddress(){
    document.getElementById("addressInput").removeAttribute("readonly");
    document.getElementById("addressInput").focus();
    document.getElementById("savebutton").style.display = "block";
    document.getElementById("cancelbutton").style.display = "block";
  }
  function cancelUpdate(){
    let addressInput = document.getElementById("addressInput");
    addressInput.value = addressInput.getAttribute("data-original-value");
    document.getElementById("addressInput").setAttribute("readonly","readonly");
    document.getElementById("savebutton").style.display = "none";
    document.getElementById("cancelbutton").style.display = "none";
  }

  function saveUpdate(){
    document.getElementById("addressInput").setAttribute("readonly","readonly");
    document.getElementById("savebutton").style.display = "none";
    document.getElementById("cancelbutton").style.display = "none";
  }

</script>

<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</body>
</html>